<div class="reply-contents">
  <table class="reply-main">
    <tr>
      <td class="reply-column type-column">
        <app-reply-icon mode="show" [reply]="reply" [type]="'listing'">
        </app-reply-icon>
      </td>
      <td>
        <div class="reply-header">
          <div class="reply-by">{{reply.createdBy.username}}</div>
          <div class="reply-age">{{ageOf(reply.createdAt)}}</div>
          <ion-icon (click)="showActionsPopup()" [id]="actionsTriggerElementId" class="reply-actions-button"
            name="ellipsis-vertical-outline">
          </ion-icon>
        </div>
        <div>
          {{reply.text}}
        </div>
      </td>
    </tr>
  </table>
  <ion-row>
    <ion-col size="7" class="reply-ranking">
      <app-idea-stats *ngIf="reply.isIdea" [idea]="reply">
      </app-idea-stats>
      <table *ngIf="!reply.isIdea" class="reply-up-down-ranking">
        <tr>
          <td class="reply-rank-up">
            <img *ngIf="reply.userReplyRating.upOrDownRating === 1" (click)="unrankUp()" class="reply-rank"
              src="assets/rank/ranked_up.png">
            <img *ngIf="reply.userReplyRating.upOrDownRating < 1" (click)="rankUp()" class="reply-rank" src="assets/rank/rank_up.png">
          </td>
          <td class="reply-count-up">
            {{getNumberAcronym(reply.numberOfUpRatings)}}
          </td>
          <td class="reply-rank-down">
            <img *ngIf="reply.userReplyRating.upOrDownRating > -1" (click)="rankDown()" class="reply-rank"
              src="assets/rank/rank_down.png">
            <img *ngIf="reply.userReplyRating.upOrDownRating === -1" (click)="unrankDown()" class="reply-rank"
              src="assets/rank/ranked_down.png">
          </td>
        </tr>
      </table>
    </ion-col>
    <ion-col size="5" class="reply-in-thread">
      <!--
      <div *ngIf="showMainAction()" class="reply-action">
        <div class="reply-action" *ngIf="reply.counts.replies === 0" (click)="addReply(reply)">Reply</div>
        <a *ngIf="reply.counts.replies === 1" [routerLink]="['/reply']">1 reply</a>
        <a *ngIf="reply.counts.replies > 1" [routerLink]="['/reply']">{{getNumberAcronym(reply.counts.replies)}}
          replies</a>
      </div>
      -->
    </ion-col>
  </ion-row>
  <ion-list class="nested-replies" *ngIf="showReplies()">
    <ion-item class="reply" *ngFor="let nestedReply of reply.childReplies; trackBy: trackByReplies">
      <app-reply-block (onActionsClick)="setDesignatedReply(reply)" [actionsTriggerElementId]="actionsTriggerElementId"
        [reply]="nestedReply" type="listing"></app-reply-block>
    </ion-item>
  </ion-list>
</div>